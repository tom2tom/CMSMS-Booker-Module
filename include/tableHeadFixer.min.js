/*!
TableHeadFixer plugin for JQuery
Version 1.0.0
Copyright (C) 2016 Lai Xuancheng <lai32690@gmail.com>
License MIT
*/
(function($,window){$.fn.tableHeadFixer=function(e){var h={head:true,foot:false,left:0,right:0,"z-index":0};var f=$.extend({},h,e);return this.each(function(){f.table=this;f.parent=$(this).parent();j();if(f.head==true){b()}if(f.foot==true){g()}if(f.left>0){l()}if(f.right>0){a()}i(f,window);$(f.parent).trigger("scroll");$(window).resize(function(){$(f.parent).trigger("scroll")})});function i(n,o){var q=null;var p;if(n.head){if(n.left>0||n.right>0){p=$(n.table).find("thead tr");if(p.length>0){q=$();if(n.left>0){p.each(function(s,t){k(t,function(u){q=q.add(u)})})}if(n.right>0){p.each(function(s,t){c(t,function(u){q=q.add(u)})})}}}}if(n.foot){if(n.left>0||n.right>0){p=$(n.table).find("tfoot tr");if(p.length>0){if(!q){q=$()}if(n.left>0){p.each(function(s,t){k(t,function(u){q=q.add(u)})})}if(n.right>0){p.each(function(s,t){c(t,function(u){q=q.add(u)})})}}}}if(q&&q.length>0){var m=$('<div style="background:none;display:none;"/>').appendTo($(n.parent));var r=m.css("background-color");m.remove();q.each(function(t,s){d(s,r)}).css("z-index",n["z-index"]+1)}}function d(m,p){for(var o=m;o!=null;o=o.parentElement){var n=$(o).css("background-color");if(n&&n!==p){if(o!=m){$(m).css("background-color",n)}return}}$(m).css("background-color","#FFF")}function j(){var m=$(f.parent);var n=$(f.table);m.append(n).css({overflow:"auto","overflow-x":"auto","overflow-y":"auto"}).scroll(function(){var q=f.parent;var r=q.scrollWidth;var u=q.clientWidth;var w=q.scrollHeight;var s=q.clientHeight;var t=m.scrollTop();var o=w-s-t;var p=m.scrollLeft();var v=r-u-p;if(f.head){this.find("thead tr > *").css("top",t)}if(f.left>0){f.leftColumns.css("left",p)}if(f.right>0){f.rightColumns.css("right",v)}if(f.foot){this.find("tfoot tr > *").css("bottom",o)}}.bind(n))}function b(){var m=$(f.table).find("thead tr > *");m.css("position","relative")}function g(){var m=$(f.table).find("tfoot tr > *");m.css("position","relative")}function l(){var n=$(f.table).find("tr");var m=$();n.each(function(o,p){k(p,function(q){m=m.add(q)})});if(m.length>0){m.css("position","relative");f.leftColumns=m}}function a(){var n=$(f.table).find("tr");var m=$();n.each(function(o,p){c(p,function(q){m=m.add(q)})});if(m.length>0){m.css("position","relative");f.rightColumns=m}}function k(s,q){var n=f.left;var r=1;for(var o=1;o<=n;o=o+r){var p=r>1?o-1:o;var m=$(s).find("> *:nth-child("+p+")");var t=m.prop("colspan");if(m.cellPos().left<n){q(m)}r=t}}function c(s,q){var n=f.right;var r=1;for(var o=1;o<=n;o=o+r){var p=r>1?o-1:o;var m=$(s).find("> *:nth-last-child("+p+")");var t=m.prop("colspan");q(m);r=t}}}})(jQuery,window);(function($){function a(c){var b=[];c.children("tr").each(function(e,d){$(d).children("td, th").each(function(h,g){var l=$(g),j=l.attr("colspan")|0,k=l.attr("rowspan")|0,i,f;j=j?j:1;k=k?k:1;for(;b[e]&&b[e][h];++h){}for(i=h;i<h+j;++i){for(f=e;f<e+k;++f){if(!b[f]){b[f]=[]}b[f][i]=true}}var m={top:e,left:h};l.data("cellPos",m)})})}$.fn.cellPos=function(b){var d=this.first(),e=d.data("cellPos");if(!e||b){var c=d.closest("table, thead, tbody, tfoot");a(c)}e=d.data("cellPos");return e}})(jQuery);