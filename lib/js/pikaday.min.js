/*!
 * Pikaday
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
(function(a,b){"use strict";var d;if(typeof exports==="object"){try{d=require("moment")}catch(c){}module.exports=b(d)}else{if(typeof define==="function"&&define.amd){define(function(f){var h="moment";try{d=f(h)}catch(g){}return b(d)})}else{a.Pikaday=b(a.moment)}}}(this,function(C){"use strict";var k=typeof C==="function",e=!!window.addEventListener,q=window.document,v=window.setTimeout,t=function(H,I,J,G){if(e){H.addEventListener(I,J,!!G)}else{H.attachEvent("on"+I,J)}},x=function(H,I,J,G){if(e){H.removeEventListener(I,J,!!G)}else{H.detachEvent("on"+I,J)}},F=function(H,G,I){var J;if(q.createEvent){J=q.createEvent("HTMLEvents");J.initEvent(G,true,false);J=z(J,I);H.dispatchEvent(J)}else{if(q.createEventObject){J=q.createEventObject();J=z(J,I);H.fireEvent("on"+G,J)}}},y=function(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")},b=function(G,H){return(" "+G.className+" ").indexOf(" "+H+" ")!==-1},m=function(G,H){if(!b(G,H)){G.className=(G.className==="")?H:G.className+" "+H}},n=function(G,H){G.className=y((" "+G.className+" ").replace(" "+H+" "," "))},r=function(J){var I=getComputedStyle(J);if(I.display==="none"){return false}if(I.visibility!=="visible"){return false}if(I.opacity<0.1){return false}var K=J.getBoundingClientRect();if(J.offsetWidth+J.offsetHeight+K.height+K.width===0){return false}var G=K.left+J.offsetWidth/2;if(G<0){return false}if(G>(q.documentElement.clientWidth||window.innerWidth)){return false}var L=K.top+J.offsetHeight/2;if(L<0){return false}if(L>(q.documentElement.clientHeight||window.innerHeight)){return false}var H=q.elementFromPoint(G,L);do{if(H===J){return true}}while(H=H.parentNode);return false},l=function(G){return(/Array/).test(Object.prototype.toString.call(G))},D=function(G){return(/Date/).test(Object.prototype.toString.call(G))&&!isNaN(G.getTime())},p=function(H){var G=H.getDay();return G===0||G===6},i=function(G){return G%4===0&&G%100!==0||G%400===0},d=function(G,H){return[31,i(G)?29:28,31,30,31,30,31,31,30,31,30,31][H]},B=function(G){if(D(G)){G.setHours(0,0,0,0)}},s=function(H,G){return H.getTime()===G.getTime()},z=function(K,J,G){var I,H;for(I in J){H=K[I]!==undefined;if(H&&typeof J[I]==="object"&&J[I]!==null&&J[I].nodeName===undefined){if(D(J[I])){if(G){K[I]=new Date(J[I].getTime())}}else{if(l(J[I])){if(G){K[I]=J[I].slice(0)}}else{K[I]=z({},J[I],G)}}}else{if(G||!H){K[I]=J[I]}}}return K},j=function(G){if(G.month<0){G.year-=Math.ceil(Math.abs(G.month)/12);G.month+=12}if(G.month>11){G.year+=Math.floor(Math.abs(G.month)/12);G.month-=12}return G},a=function(H,G){var I=C(H,G);return(I&&I.isValid())?I.toDate():null},h=function(H,G){return C(H).format(G)},defaults={field:null,bound:undefined,position:"bottom left",reposition:true,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:false,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:false,yearSuffix:"",showMonthAfterYear:false,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},getdate:null,reformat:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},E=function(I,G,H){G+=I.firstDay;while(G>=7){G-=7}return H?I.i18n.weekdaysShort[G]:I.i18n.weekdays[G]},w=function(L,H,M,G,K,N,I){if(I){return'<td class="is-empty"></td>'}var J=[],O;if(N){J.push("is-disabled")}if(K){J.push("is-today")}if(G){J.push("is-selected")}O=(J.length>0)?' class="'+J.join(" ")+'"':"";return'<td data-day="'+L+'"'+O+'><button class="pika-button pika-day" data-pika-year="'+M+'" data-pika-month="'+H+'" data-pika-day="'+L+'">'+L+"</button></td>"},g=function(J,G,K){var I=new Date(K,0,1),H=Math.ceil((((new Date(K,G,J)-I)/86400000)+I.getDay()+1)/7);return'<td class="pika-week">'+H+"</td>"},f=function(H,G){return"<tr>"+(G?H.reverse():H).join("")+"</tr>"},c=function(G){return"<tbody>"+G.join("")+"</tbody>"},A=function(I){var H,G=[];if(I.showWeekNumber){G.push("<th></th>")}for(H=0;H<7;H++){G.push('<th scope="col"><abbr title="'+E(I,H)+'">'+E(I,H,true)+"</abbr></th>")}return"<thead>"+(I.isRTL?G.reverse():G).join("")+"</thead>"},u=function(U,R,S,Q,W){var M,K,P,L,G=U._o,J=S===G.minYear,V=S===G.maxYear,O='<div class="pika-title">',I,T,H=true,N=true;for(P=[],M=0;M<12;M++){P.push('<option value="'+(S===W?M-R:12+M-R)+'"'+(M===Q?" selected":"")+((J&&M<G.minMonth)||(V&&M>G.maxMonth)?"disabled":"")+">"+G.i18n.months[M]+"</option>")}I='<div class="pika-label"><select class="pika-select pika-select-month">'+P.join("")+"</select></div>";if(l(G.yearRange)){M=G.yearRange[0];K=G.yearRange[1]+1}else{M=S-G.yearRange;K=1+S+G.yearRange}for(P=[];M<K&&M<=G.maxYear;M++){if(M>=G.minYear){P.push('<option value="'+M+'"'+(M===S?" selected":"")+">"+(M)+"</option>")}}T='<div class="pika-label"><select class="pika-select pika-select-year">'+P.join("")+"</select></div>";if(G.showMonthAfterYear){O+=T+I}else{O+=I+T}if(J&&(Q===0||G.minMonth>=Q)){H=false}if(V&&(Q===11||G.maxMonth<=Q)){N=false}if(R===0){L=G.i18n.previousMonth;O+='<button class="pika-prev'+(H?"":" is-disabled")+'" title="'+L+'">'+L+"</button>"}if(R===(U._o.numberOfMonths-1)){L=G.i18n.nextMonth;O+='<button class="pika-next'+(N?"":" is-disabled")+'" title="'+L+'">'+L+"</button>"}return O+="</div>"},o=function(G,H){return'<table class="pika-table">'+A(G)+c(H)+"</table>"},Pikaday=function(I){var G=this,J=G.config(I);G._onMouseDown=function(L){if(!G._v){return}L=L||window.event;var K=L.target||L.srcElement;if(!K){return}if(!b(K,"is-disabled")){if(b(K,"pika-button")&&!b(K,"is-empty")){G.setDate(new Date(K.getAttribute("data-pika-year"),K.getAttribute("data-pika-month"),K.getAttribute("data-pika-day")),false);if(J.bound){v(function(){G.hide();if(J.field){J.field.blur()}},100)}return}else{if(b(K,"pika-prev")){G.prevMonth()}else{if(b(K,"pika-next")){G.nextMonth()}}}}if(!b(K,"pika-select")){if(L.preventDefault){L.preventDefault()}else{L.returnValue=false;return false}}else{G._c=true}};G._onChange=function(L){L=L||window.event;var K=L.target||L.srcElement;if(!K){return}if(b(K,"pika-select-month")){G.gotoMonth(K.value)}else{if(b(K,"pika-select-year")){G.gotoYear(K.value)}}};G._onInputChange=function(L){var K;if(L.firedBy===G){return}if(typeof J.getdate==="function"){K=J.getdate.call(this,J.field.value,J.format)}else{K=new Date(Date.parse(J.field.value))}G.setDate(D(K)?K:null);if(!G._v){G.show()}};G._onInputFocus=function(){G.show()};G._onInputClick=function(){G.show()};G._onInputBlur=function(){var K=q.activeElement;do{if(b(K,"pika-single")){return}}while((K=K.parentNode));if(!G._c){G._b=v(function(){G.hide()},50)}G._c=false};G._onClick=function(L){L=L||window.event;var K=L.target||L.srcElement,M=K;if(!K){return}if(!e&&b(K,"pika-select")){if(!K.onchange){K.setAttribute("onchange","return;");t(K,"change",G._onChange)}}do{if(b(M,"pika-single")||M===J.trigger){return}}while((M=M.parentNode));if(G._v&&K!==J.trigger&&M!==J.trigger){G.hide()}};G.el=q.createElement("div");G.el.className="pika-single"+(J.isRTL?" is-rtl":"");t(G.el,"mousedown",G._onMouseDown,true);t(G.el,"change",G._onChange);if(J.field){if(J.container){J.container.appendChild(G.el)}else{if(J.bound){q.body.appendChild(G.el)}else{J.field.parentNode.insertBefore(G.el,J.field.nextSibling)}}t(J.field,"change",G._onInputChange);if(!J.defaultDate&&J.field.value){if(typeof J.getdate==="function"){J.defaultDate=J.getdate.call(this,J.field.value,J.format)}else{J.defaultDate=new Date(Date.parse(J.field.value))}J.setDefaultDate=J.defaultDate==true}}var H=J.defaultDate;if(D(H)){if(J.setDefaultDate){G.setDate(H,true)}else{G.gotoDate(H)}}else{G.gotoDate(new Date())}if(J.bound){this.hide();G.el.className+=" is-bound";t(J.trigger,"click",G._onInputClick);t(J.trigger,"focus",G._onInputFocus);t(J.trigger,"blur",G._onInputBlur)}else{this.show()}};Pikaday.prototype={config:function(I){if(!this._o){this._o=z({},defaults,true)}var H=z(this._o.i18n,I.i18n,true),J=z(this._o,I,true);J.i18n=H;J.isRTL=!!J.isRTL;J.field=(J.field&&J.field.nodeName)?J.field:null;J.bound=!!(J.bound!==undefined?J.field&&J.bound:J.field);J.trigger=(J.trigger&&J.trigger.nodeName)?J.trigger:J.field;J.disableWeekends=!!J.disableWeekends;J.disableDayFn=(typeof J.disableDayFn)=="function"?J.disableDayFn:null;var G=parseInt(J.numberOfMonths,10)||1;J.numberOfMonths=G>4?4:G;if(!D(J.minDate)){J.minDate=false}if(!D(J.maxDate)){J.maxDate=false}if((J.minDate&&J.maxDate)&&J.maxDate<J.minDate){J.maxDate=J.minDate=false}if(J.minDate){B(J.minDate);J.minYear=J.minDate.getFullYear();J.minMonth=J.minDate.getMonth()}if(J.maxDate){B(J.maxDate);J.maxYear=J.maxDate.getFullYear();J.maxMonth=J.maxDate.getMonth()}if(l(J.yearRange)){var K=new Date().getFullYear()-10;J.yearRange[0]=parseInt(J.yearRange[0],10)||K;J.yearRange[1]=parseInt(J.yearRange[1],10)||K}else{J.yearRange=Math.abs(parseInt(J.yearRange,10))||defaults.yearRange;if(J.yearRange>100){J.yearRange=100}}if(!J.getdate&&k){J.getdate=a}if(!J.reformat&&k){J.reformat=h}return J},toString:function(G){if(this._d&&D(this._d)){if(typeof this._o.reformat==="function"){return this._o.reformat.call(this,this._d,G||this._o.format)}else{return this._d.toDateString()}}return""},getMoment:function(){return null},setMoment:function(G,H){},getDate:function(){return D(this._d)?new Date(this._d.getTime()):null},setDate:function(I,N){if(!I){this._d=null;if(this._o.field){this._o.field.value="";if(this._o.field!=this._o.trigger){F(this._o.field,"change",{firedBy:this})}}this.draw();return}if(typeof I==="string"){I=new Date(Date.parse(I))}if(!D(I)){return}var L=this._o.minDate,O=this._o.maxDate;if(D(L)&&I<L){I=L}else{if(D(O)&&I>O){I=O}}var J=new Date(I.getTime());B(J);this.gotoDate(J);var H=this._o.field.value;if(H){var G;if(typeof this._o.getdate==="function"){G=this._o.getdate.call(this,H,this._o.format)}else{G=new Date(Date.parse(H))}if(D(G)){var K=G.getTime();B(G);var M=K-G.getTime();if(M){J.setTime(J.getTime()+M)}}}this._d=J;this._o.field.value=this.toString();if(this._o.field!=this._o.trigger){F(this._o.field,"change",{firedBy:this})}if(!N&&typeof this._o.onSelect==="function"){this._o.onSelect.call(this,this.getDate())}},gotoDate:function(I){var H=true;if(!D(I)){return}if(this.calendars){var K=new Date(this.calendars[0].year,this.calendars[0].month,1),G=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),J=I.getTime();G.setMonth(G.getMonth()+1);G.setDate(G.getDate()-1);H=(J<K.getTime()||G.getTime()<J)}if(H){this.calendars=[{month:I.getMonth(),year:I.getFullYear()}];if(this._o.mainCalendar==="right"){this.calendars[0].month+=1-this._o.numberOfMonths}}this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=j(this.calendars[0]);for(var G=1;G<this._o.numberOfMonths;G++){this.calendars[G]=j({month:this.calendars[0].month+G,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date())},gotoMonth:function(G){if(!isNaN(G)){this.calendars[0].month=parseInt(G,10);this.adjustCalendars()}},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(G){if(!isNaN(G)){this.calendars[0].year=parseInt(G,10);this.adjustCalendars()}},setMinDate:function(G){this._o.minDate=G},setMaxDate:function(G){this._o.maxDate=G},draw:function(H){if(!this._v&&!H){return}var G=this._o,N=G.minYear,K=G.maxYear,L=G.minMonth,I=G.maxMonth,J="";if(this._y<=N){this._y=N;if(!isNaN(L)&&this._m<L){this._m=L}}if(this._y>=K){this._y=K;if(!isNaN(I)&&this._m>I){this._m=I}}for(var M=0;M<G.numberOfMonths;M++){J+='<div class="pika-lendar">'+u(this,M,this.calendars[M].year,this.calendars[M].month,this.calendars[0].year)+this.render(this.calendars[M].year,this.calendars[M].month)+"</div>"}this.el.innerHTML=J;if(G.bound){if(G.field.type!=="hidden"){v(function(){G.trigger.focus()},1)}}if(typeof this._o.onDraw==="function"){var O=this;v(function(){O._o.onDraw.call(O)},0)}},adjustPosition:function(){if(this._o.container){return}var O=r(this._o.field)?this._o.field:this._o.trigger,M=this._o.trigger,H=this.el.offsetWidth,P=this.el.offsetHeight,L=window.innerWidth||q.documentElement.clientWidth,K=window.innerHeight||q.documentElement.clientHeight,I=window.pageYOffset||q.body.scrollTop||q.documentElement.scrollTop,J,N,G;if(typeof O.getBoundingClientRect==="function"){G=O.getBoundingClientRect();J=G.left+window.pageXOffset;N=G.bottom+window.pageYOffset}else{J=M.offsetLeft;N=M.offsetTop+M.offsetHeight;while((M=M.offsetParent)){J+=M.offsetLeft;N+=M.offsetTop}}if((this._o.reposition&&J+H>L)||(this._o.position.indexOf("right")>-1&&J-H+O.offsetWidth>0)){J=J-H+O.offsetWidth}if((this._o.reposition&&N+P>K+I)||(this._o.position.indexOf("top")>-1&&N-P-O.offsetHeight>0)){N=N-P-O.offsetHeight}this.el.style.cssText=["position: absolute","left: "+J+"px","top: "+N+"px"].join(";")},render:function(Q,P){var H=this._o,K=new Date(),U=d(Q,P),S=new Date(Q,P,1).getDay(),N=[],W=[];B(K);if(H.firstDay>0){S-=H.firstDay;if(S<0){S+=7}}var V=U+S,I=V;while(I>7){I-=7}V+=7-I;for(var M=0,G=0;M<V;M++){var R=new Date(Q,P,1+(M-S)),J=D(this._d)?s(R,this._d):false,O=s(R,K),L=M<S||M>=(U+S),T=(H.minDate&&R<H.minDate)||(H.maxDate&&R>H.maxDate)||(H.disableWeekends&&p(R))||(H.disableDayFn&&H.disableDayFn(R));W.push(w(1+(M-S),P,Q,J,O,T,L));G++;if(G===7){if(H.showWeekNumber){W.unshift(g(M-S,P,Q))}N.push(f(W,H.isRTL));W=[];G=0}}return o(H,N)},isVisible:function(){return this._v},show:function(){if(!this._v){n(this.el,"is-hidden");this._v=true;this.draw();if(this._o.bound){t(q,"click",this._onClick);this.adjustPosition()}if(typeof this._o.onOpen==="function"){this._o.onOpen.call(this)}}},hide:function(){var G=this._v;if(G!==false){if(this._o.bound){x(q,"click",this._onClick)}this.el.style.cssText="";m(this.el,"is-hidden");this._v=false;if(G!==undefined&&G!==false&&typeof this._o.onClose==="function"){this._o.onClose.call(this)}}},destroy:function(){this.hide();x(this.el,"mousedown",this._onMouseDown,true);x(this.el,"change",this._onChange);if(this._o.field){x(this._o.field,"change",this._onInputChange);if(this._o.bound){x(this._o.trigger,"click",this._onInputClick);x(this._o.trigger,"focus",this._onInputFocus);x(this._o.trigger,"blur",this._onInputBlur)}}if(this.el.parentNode){this.el.parentNode.removeChild(this.el)}}};return Pikaday}));